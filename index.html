<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>AxiomaticAI</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400..900&display=swap" rel="stylesheet">

<style>
    /* Общие стили */
    body {
        margin: 0;
        background: linear-gradient(180deg, #0a0215 0%, #0f0024 100%);
        color: #e6d6ff;
        font-family: 'Orbitron', sans-serif;
        display: flex;
        flex-direction: column;
        height: 100vh;
        overflow: hidden;
    }

    /* Верхняя панель */
    .top-bar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 12px 20px;
        background: #2a0046;
        border-bottom: 2px solid #8b3dff;
        font-weight: bold;
        letter-spacing: 2px;
        z-index: 10;
        box-shadow: 0 0 15px #4b0aff66;
    }
    .top-bar img { width: 35px; height: 35px; cursor: pointer; }
    .top-bar-title { font-size: 22px; color: #fff; }
    .top-bar-title2 { font-size: 18px; color: #dcd0ff; }

    /* Окно чата */
    #chat {
        flex: 1;
        overflow-y: auto;
        padding: 20px;
        scroll-behavior: smooth;
    }

    .msg {
        max-width: 75%;
        padding: 12px 16px;
        margin-bottom: 12px;
        border-radius: 15px;
        line-height: 1.4em;
        white-space: pre-wrap;
        font-size: 16px;
        position: relative;
        animation: fadeSlide 0.4s ease forwards;
        box-shadow: 0 0 10px #4b0aff33, 0 0 20px #6b14ff22;
        transition: transform 0.3s;
    }
    .msg:hover { transform: scale(1.02); }
    .user { background: #3a0066; border: 1px solid #6b14ff; align-self: flex-end; margin-left: auto; }
    .bot { background: #140024; border: 1px solid #4b0aff; align-self: flex-start; }
    .typing { opacity: 0.6; font-style: italic; }

    @keyframes fadeSlide {
        0% { opacity: 0; transform: translateY(10px);}
        100% { opacity: 1; transform: translateY(0);}
    }

    .typing::after {
        content: "";
        animation: typingDots 1s infinite;
    }
    @keyframes typingDots {
        0%, 20% { content: ""; }
        40% { content: "."; }
        60% { content: ".."; }
        80%, 100% { content: "..."; }
    }

    /* Ввод */
    .input-bar {
        display: flex;
        padding: 12px;
        background: #150020;
        border-top: 2px solid #4b0aff;
        width: 70%;
        margin: 0 auto 15px auto;
        border-radius: 12px;
        box-shadow: 0 0 15px #4b0aff44;
    }
    #input {
        flex: 1;
        padding: 10px 14px;
        border-radius: 8px;
        background: #1e0130;
        color: #e8d3ff;
        font-size: 16px;
        border: 1px solid #6b14ff;
        resize: none;
        height: 48px;
        outline: none;
    }
    button {
        margin-left: 10px;
        padding: 0 24px;
        border-radius: 8px;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
        border: none;
        background: linear-gradient(90deg, #6b14ff, #b300ff);
        color: #fff;
        box-shadow: 0 0 12px #b300ffaa, 0 0 24px #6b14ffaa;
        transition: 0.3s;
    }
    button:hover {
        background: linear-gradient(90deg, #b300ff, #4300ff);
        box-shadow: 0 0 18px #b300ff, 0 0 30px #7a00ff;
    }

    /* Боковая панель */
    .side-panel {
        position: fixed;
        top: 0; left: 0;
        width: 15%;
        height: 100%;
        background: #1a002bdd;
        padding: 20px;
        border-radius: 0 15px 15px 0;
        box-shadow: 0 0 20px #4b0aff44;
        transform: translateX(-100%);
        transition: transform 0.5s ease;
        z-index: 9;
        overflow-y: auto;
    }
    .hover-image:hover + .side-panel,
    .side-panel:hover { transform: translateX(0); }

    /* Партиклы */
    #particles {
        position: fixed;
        top: 0; left: 0;
        width: 100%; height: 100%;
        pointer-events: none;
        overflow: hidden;
        z-index: -1;
    }
    .particle {
        position: absolute;
        background: #6b14ff;
        width: 4px; height: 4px;
        border-radius: 50%;
        opacity: 0.5;
        animation: floatUp linear infinite;
    }
    @keyframes floatUp {
        from { transform: translateY(0); opacity: 0.6; }
        to { transform: translateY(-250px); opacity: 0; }
    }

    /* Кнопка прокрутки вниз */
    #scrollDownBtn {
        position: fixed;
        right: 20px;
        bottom: 20px;
        width: 48px; height: 48px;
        background: #6b14ff;
        border-radius: 50%;
        display: flex;
        justify-content: center;
        align-items: center;
        color: #fff;
        font-size: 24px;
        cursor: pointer;
        box-shadow: 0 0 20px #6b14ff77, 0 0 35px #b300ff77;
        transition: 0.3s;
        z-index: 20;
        display: none;
    }
    #scrollDownBtn:hover { transform: scale(1.1); box-shadow: 0 0 25px #b300ff, 0 0 40px #7a00ff; }

    /* Очистка чата */
    #clearChatBtn {
        position: fixed;
        bottom: 80px;
        right: 20px;
        padding: 14px 22px;
        background: linear-gradient(90deg, #b300ff, #4300ff, #7a00ff);
        color: white;
        border-radius: 14px;
        font-weight: bold;
        cursor: pointer;
        border: none;
        box-shadow: 0 0 18px #6b14ff, 0 0 30px #b300ff;
        z-index: 20;
        transition: 0.3s;
        animation: neonPulse 2s infinite;
    }
    #clearChatBtn:hover {
        transform: scale(1.1);
        animation: neonPulseHover 1s infinite;
    }
    @keyframes neonPulse {
        0%, 100% { box-shadow: 0 0 15px #6b14ff, 0 0 25px #b300ff; }
        50% { box-shadow: 0 0 25px #b300ff, 0 0 35px #7a00ff; }
    }
    @keyframes neonPulseHover {
        0%, 100% { box-shadow: 0 0 25px #b300ff, 0 0 35px #7a00ff; }
        50% { box-shadow: 0 0 35px #7a00ff, 0 0 45px #b300ff; }
    }
</style>
</head>

<body>

<div id="particles"></div>
<div id="scrollDownBtn">↓</div>

<div class="top-bar">
    <div class="wrapper">
        <img src="images/info.png" alt="info" class="hover-image">
        <div class="side-panel">
            <h2 class="top-bar-title2">Информация о AxiomaticAI</h2>
            <p>AxiomaticAI — уникальная нейросеть для генерации ответов в стиле глубокого поиска и творчества.</p>
        </div>
    </div>
    <div class="top-bar-title">AxiomaticAI</div>
    <div class="wrapper2">
        <img src="images/text.png" alt="text">
        <img src="images/pisture.png" alt="createpicture">
    </div>
</div>

<div id="chat"></div>

<div class="input-bar">
    <textarea id="input" placeholder="Введите сообщение..."></textarea>
    <button onclick="sendMessage()">Отправить</button>
</div>

<button id="clearChatBtn">Очистить чат</button>

<script>
const WORKER_URL = "https://dry-poetry-c422.mihailuskov341.workers.dev";
const chat = document.getElementById("chat");
const input = document.getElementById("input");
const scrollBtn = document.getElementById("scrollDownBtn");

/* Создание партиклов с интерактивностью */
function createParticles() {
    const box = document.getElementById("particles");
    for (let i = 0; i < 60; i++) {
        const p = document.createElement("div");
        p.classList.add("particle");
        p.style.left = Math.random()*100 + "%";
        p.style.top = Math.random()*100 + "%";
        p.style.animationDuration = (4 + Math.random()*6) + "s";
        box.appendChild(p);
    }
}
createParticles();

/* Enter = отправка */
input.addEventListener("keydown", e => {
    if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
    }
});

/* Сохранение истории */
function saveHistory() { localStorage.setItem("axiomatic_history", chat.innerHTML); }
function loadHistory() { const h = localStorage.getItem("axiomatic_history"); if (h) chat.innerHTML = h; }
loadHistory();

/* Добавление сообщения */
function addMessage(text, sender) {
    const div = document.createElement("div");
    div.classList.add("msg", sender);
    div.textContent = text;

    if (sender === "bot") {
        const btn = document.createElement("img");
        btn.src = "images/copy.png";
        btn.style.width = "20px";
        btn.style.position = "absolute";
        btn.style.right = "5px";
        btn.style.bottom = "5px";
        btn.style.cursor = "pointer";
        btn.onclick = () => navigator.clipboard.writeText(text);
        div.appendChild(btn);
    }

    chat.appendChild(div);
    chat.scrollTop = chat.scrollHeight;
    saveHistory();
    return div;
}

/* Кнопка прокрутки */
chat.addEventListener("scroll", () => {
    scrollBtn.style.display = chat.scrollTop + chat.clientHeight < chat.scrollHeight ? "flex" : "none";
});
scrollBtn.onclick = () => chat.scrollTop = chat.scrollHeight;

/* Очистка чата */
document.getElementById("clearChatBtn").onclick = () => {
    chat.innerHTML = "";
    localStorage.removeItem("axiomatic_history");
};

/* Отправка сообщения */
async function sendMessage() {
    const text = input.value.trim();
    if (!text) return;

    addMessage(text, "user");
    input.value = "";

    const typing = addMessage("Печатает", "typing");

    try {
        const res = await fetch(WORKER_URL, {
            method: "POST",
            headers: {"Content-Type":"application/json"},
            body: JSON.stringify({ message: text })
        });
        typing.remove();
        const data = await res.json();
        addMessage(data.answer || "Ошибка ответа", "bot");
    } catch {
        typing.remove();
        addMessage("Ошибка соединения", "bot");
    }
}
</script>

</body>
</html>
